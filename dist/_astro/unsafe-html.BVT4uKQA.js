import{v as Mt,g as Tt,a as Pt,w as Lt,i as ot}from"./whenAttribute.7alHw7Tz.js";import"./is-class.C7EF8Sfu.js";function at(t){return!(!t||"object"!=typeof t||t.constructor&&"Object"!==t.constructor.name||"[object Object]"!==Object.prototype.toString.call(t)||t!==Object(t))}const Ut=/([\p{Ll}\d])(\p{Lu})/gu,jt=/(\p{Lu})([\p{Lu}][\p{Ll}])/gu,Dt=/(\d)\p{Ll}|(\p{L})\d/u,Ft=/[^\p{L}\d]+/giu,ct="$1\0$2",ht="";function At(t){let e=t.trim();e=e.replace(Ut,ct).replace(jt,ct),e=e.replace(Ft,"\0");let i=0,s=e.length;for(;"\0"===e.charAt(i);)i++;if(i===s)return[];for(;"\0"===e.charAt(s-1);)s--;return e.slice(i,s).split(/\0/g)}function Ht(t){const e=At(t);for(let t=0;t<e.length;t++){const i=e[t],s=Dt.exec(i);if(s){const n=s.index+(s[1]??s[2]).length;e.splice(t,1,i.slice(0,n),i.slice(n))}}return e}function Wt(t,e){const[i,s,n]=qt(t,e),r=Bt(e?.locale),o=zt(e?.locale),a=Jt(r,o);return i+s.map(((t,e)=>0===e?r(t):a(t,e))).join("")+n}function Bt(t){return e=>e.toLocaleLowerCase(t)}function zt(t){return e=>e.toLocaleUpperCase(t)}function Jt(t,e){return(i,s)=>{const n=i[0];return(s>0&&n>="0"&&n<="9"?"_"+n:e(n))+t(i.slice(1))}}function qt(t,e={}){const i=e.split??(e.separateNumbers?Ht:At),s=e.prefixCharacters??"",n=e.suffixCharacters??"";let r=0,o=t.length;for(;r<t.length;){const e=t.charAt(r);if(!s.includes(e))break;r++}for(;o>r;){const e=o-1,i=t.charAt(e);if(!n.includes(i))break;o=e}return[t.slice(0,r),i(t.slice(r,o)),t.slice(o)]}function lt(t){return Wt(t)}function ut(t,e){var i;const s=Object.assign({id:`injected-style-${Mt()}`,rootNode:void 0},e??{});if(document.querySelector(`#${s.id}`))return;const n=document.createElement("style");if(n.type="text/css",n.setAttribute("id",s.id),n.innerHTML=t,s.rootNode)s.rootNode.appendChild(n);else{const t=document.querySelector('head link[rel="stylesheet"]');t?null===(i=t.parentElement)||void 0===i||i.insertBefore(n,t):document.head.appendChild(n)}return n}function dt(t,e){const i=Object.assign({stringify:!1},{}),s=t.concat();for(let t=0;t<s.length;++t)for(let e=t+1;e<s.length;++e){let n=s[t],r=s[e];i.stringify&&(at(n)&&(n=JSON.stringify(n)),at(r)&&(r=JSON.stringify(r))),n===r&&s.splice(e--,1)}return s}var ft,z={};function Vt(){if(ft)return z;ft=1,Object.defineProperty(z,"__esModule",{value:!0}),z.default=function(e,i={format:"medium"}){if(!["short","medium","long"].includes(i.format))throw new Error("The provided format is incorrect.");const s=(new Date).getTime(),n=e instanceof Date?(s-e.getTime())/1e3:s/1e3-e,r=Math.floor(n),o=Math.floor(r/60),a=Math.floor(o/60),c=Math.floor(a/24),h=Math.floor(c/7),l=Math.floor(c/30),u=Math.floor(c/365);if(r<0)throw new Error("The time difference is negative. The provided timestamp is in the future.");if(0===r)return"now";const d={years:u,months:l,weeks:h,days:c,hours:a,minutes:o,seconds:r},p=Object.keys(d).find((t=>d[t]>0))||"seconds",f=d[p],m="short"===i.format,g=f>1&&!m?"s":"",y=t[p][i.format];return`${f}${m?"":" "}${y}${g} ago`};const t={seconds:{short:"s",medium:"sec",long:"second"},minutes:{short:"m",medium:"min",long:"minute"},hours:{short:"h",medium:"hr",long:"hour"},days:{short:"d",medium:"day",long:"day"},weeks:{short:"w",medium:"wk",long:"week"},months:{short:"m",medium:"mon",long:"month"},years:{short:"y",medium:"yr",long:"year"}};return z}function Xt(t=0){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}Vt();var pt,J={exports:{}},Kt=J.exports;function Zt(){return pt||(pt=1,J.exports=function(){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=function(){function t(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;e(this,t),this.ctx=i,this.iframes=s,this.exclude=n,this.iframesTimeout=r}return i(t,[{key:"getContexts",value:function(){var t=[];return(typeof this.ctx>"u"||!this.ctx?[]:NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]).forEach((function(e){var i=t.filter((function(t){return t.contains(e)})).length>0;-1===t.indexOf(e)&&!i&&t.push(e)})),t}},{key:"getIframeContents",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=void 0;try{var n=t.contentWindow;if(s=n.document,!n||!s)throw new Error("iframe inaccessible")}catch{i()}s&&e(s)}},{key:"isIframeBlank",value:function(t){var e="about:blank",i=t.getAttribute("src").trim();return t.contentWindow.location.href===e&&i!==e&&i}},{key:"observeIframeLoad",value:function(t,e,i){var s=this,n=!1,r=null,o=function o(){if(!n){n=!0,clearTimeout(r);try{s.isIframeBlank(t)||(t.removeEventListener("load",o),s.getIframeContents(t,e,i))}catch{i()}}};t.addEventListener("load",o),r=setTimeout(o,this.iframesTimeout)}},{key:"onIframeReady",value:function(t,e,i){try{"complete"===t.contentWindow.document.readyState?this.isIframeBlank(t)?this.observeIframeLoad(t,e,i):this.getIframeContents(t,e,i):this.observeIframeLoad(t,e,i)}catch{i()}}},{key:"waitForIframes",value:function(t,e){var i=this,s=0;this.forEachIframe(t,(function(){return!0}),(function(t){s++,i.waitForIframes(t.querySelector("html"),(function(){--s||e()}))}),(function(t){t||e()}))}},{key:"forEachIframe",value:function(e,i,s){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=e.querySelectorAll("iframe"),a=o.length,c=0;o=Array.prototype.slice.call(o);var h=function(){--a<=0&&r(c)};a||h(),o.forEach((function(e){t.matches(e,n.exclude)?h():n.onIframeReady(e,(function(t){i(e)&&(c++,s(t)),h()}),h)}))}},{key:"createIterator",value:function(t,e,i){return document.createNodeIterator(t,e,i,!1)}},{key:"createInstanceOnIframe",value:function(e){return new t(e.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(t,e,i){if(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING){if(null===e)return!0;if(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(t){var e=t.previousNode();return{prevNode:e,node:(null===e||t.nextNode())&&t.nextNode()}}},{key:"checkIframeFilter",value:function(t,e,i,s){var n=!1,r=!1;return s.forEach((function(t,e){t.val===i&&(n=e,r=t.handled)})),this.compareNodeIframe(t,e,i)?(!1!==n||r?!1!==n&&!r&&(s[n].handled=!0):s.push({val:i,handled:!0}),!0):(!1===n&&s.push({val:i,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(t,e,i,s){var n=this;t.forEach((function(t){t.handled||n.getIframeContents(t.val,(function(t){n.createInstanceOnIframe(t).forEachNode(e,i,s)}))}))}},{key:"iterateThroughNodes",value:function(t,e,i,s,n){for(var r=this,o=this.createIterator(e,t,s),a=[],c=[],h=void 0,l=void 0,u=function(){var t=r.getIteratorNode(o);return l=t.prevNode,h=t.node};u();)this.iframes&&this.forEachIframe(e,(function(t){return r.checkIframeFilter(h,l,t,a)}),(function(e){r.createInstanceOnIframe(e).forEachNode(t,(function(t){return c.push(t)}),s)})),c.push(h);c.forEach((function(t){i(t)})),this.iframes&&this.handleOpenIframes(a,t,i,s),n()}},{key:"forEachNode",value:function(t,e,i){var s=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=this.getContexts(),o=r.length;o||n(),r.forEach((function(r){var a=function(){s.iterateThroughNodes(t,r,e,i,(function(){--o<=0&&n()}))};s.iframes?s.waitForIframes(r,a):a()}))}}],[{key:"matches",value:function(t,e){var i="string"==typeof e?[e]:e,s=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;if(s){var n=!1;return i.every((function(e){return!s.call(t,e)||(n=!0,!1)})),n}return!1}}]),t}(),r=function(){function r(t){e(this,r),this.ctx=t,this.ie=!1;var i=window.navigator.userAgent;(i.indexOf("MSIE")>-1||i.indexOf("Trident")>-1)&&(this.ie=!0)}return i(r,[{key:"log",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",s=this.opt.log;this.opt.debug&&"object"===(typeof s>"u"?"undefined":t(s))&&"function"==typeof s[i]&&s[i]("mark.js: "+e)}},{key:"escapeStr",value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(t){return"disabled"!==this.opt.wildcards&&(t=this.setupWildcardsRegExp(t)),t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.createJoinersRegExp(t)),"disabled"!==this.opt.wildcards&&(t=this.createWildcardsRegExp(t)),t=this.createAccuracyRegExp(t)}},{key:"createSynonymsRegExp",value:function(t){var e=this.opt.synonyms,i=this.opt.caseSensitive?"":"i",s=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(n):this.escapeStr(n),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r);""!==o&&""!==a&&(t=t.replace(new RegExp("("+this.escapeStr(o)+"|"+this.escapeStr(a)+")","gm"+i),s+"("+this.processSynomyms(o)+"|"+this.processSynomyms(a)+")"+s))}return t}},{key:"processSynomyms",value:function(t){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),t}},{key:"setupWildcardsRegExp",value:function(t){return(t=t.replace(/(?:\\)*\?/g,(function(t){return"\\"===t.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(t){return"\\"===t.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(t){var e="withSpaces"===this.opt.wildcards;return t.replace(/\u0001/g,e?"[\\S\\s]?":"\\S?").replace(/\u0002/g,e?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(t){return t.replace(/[^(|)\\]/g,(function(t,e,i){var s=i.charAt(e+1);return/[(|)\\]/.test(s)||""===s?t:t+"\0"}))}},{key:"createJoinersRegExp",value:function(t){var e=[],i=this.opt.ignorePunctuation;return Array.isArray(i)&&i.length&&e.push(this.escapeStr(i.join(""))),this.opt.ignoreJoiners&&e.push("\\u00ad\\u200b\\u200c\\u200d"),e.length?t.split(/\u0000+/).join("["+e.join("")+"]*"):t}},{key:"createDiacriticsRegExp",value:function(t){var e=this.opt.caseSensitive?"":"i",i=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],s=[];return t.split("").forEach((function(n){i.every((function(i){if(-1!==i.indexOf(n)){if(s.indexOf(i)>-1)return!1;t=t.replace(new RegExp("["+i+"]","gm"+e),"["+i+"]"),s.push(i)}return!0}))})),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(t){var e=this,i="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",s=this.opt.accuracy,n="string"==typeof s?s:s.value,r="string"==typeof s?[]:s.limiters,o="";switch(r.forEach((function(t){o+="|"+e.escapeStr(t)})),n){case"partially":default:return"()("+t+")";case"complementary":return"()([^"+(o="\\s"+(o||this.escapeStr(i)))+"]*"+t+"[^"+o+"]*)";case"exactly":return"(^|\\s"+o+")("+t+")(?=$|\\s"+o+")"}}},{key:"getSeparatedKeywords",value:function(t){var e=this,i=[];return t.forEach((function(t){e.opt.separateWordSearch?t.split(" ").forEach((function(t){t.trim()&&-1===i.indexOf(t)&&i.push(t)})):t.trim()&&-1===i.indexOf(t)&&i.push(t)})),{keywords:i.sort((function(t,e){return e.length-t.length})),length:i.length}}},{key:"isNumeric",value:function(t){return Number(parseFloat(t))==t}},{key:"checkRanges",value:function(t){var e=this;if(!Array.isArray(t)||"[object Object]"!==Object.prototype.toString.call(t[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(t),[];var i=[],s=0;return t.sort((function(t,e){return t.start-e.start})).forEach((function(t){var n=e.callNoMatchOnInvalidRanges(t,s),r=n.start,o=n.end;n.valid&&(t.start=r,t.length=o-r,i.push(t),s=o)})),i}},{key:"callNoMatchOnInvalidRanges",value:function(t,e){var i=void 0,s=void 0,n=!1;return t&&typeof t.start<"u"?(s=(i=parseInt(t.start,10))+parseInt(t.length,10),this.isNumeric(t.start)&&this.isNumeric(t.length)&&s-e>0&&s-i>0?n=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(t)),this.opt.noMatch(t))):(this.log("Ignoring invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:i,end:s,valid:n}}},{key:"checkWhitespaceRanges",value:function(t,e,i){var s=void 0,n=!0,r=i.length,o=e-r,a=parseInt(t.start,10)-o;return(s=(a=a>r?r:a)+parseInt(t.length,10))>r&&(s=r,this.log("End range automatically set to the max value of "+r)),a<0||s-a<0||a>r||s>r?(n=!1,this.log("Invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)):""===i.substring(a,s).replace(/\s+/g,"")&&(n=!1,this.log("Skipping whitespace only range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:a,end:s,valid:n}}},{key:"getTextNodes",value:function(t){var e=this,i="",s=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(t){s.push({start:i.length,end:(i+=t.textContent).length,node:t})}),(function(t){return e.matchesExclude(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){t({value:i,nodes:s})}))}},{key:"matchesExclude",value:function(t){return n.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(t,e,i){var s=this.opt.element?this.opt.element:"mark",n=t.splitText(e),r=n.splitText(i-e),o=document.createElement(s);return o.setAttribute("data-markjs","true"),this.opt.className&&o.setAttribute("class",this.opt.className),o.textContent=n.textContent,n.parentNode.replaceChild(o,n),r}},{key:"wrapRangeInMappedTextNode",value:function(t,e,i,s,n){var r=this;t.nodes.every((function(o,a){var c=t.nodes[a+1];if(typeof c>"u"||c.start>e){if(!s(o.node))return!1;var h=e-o.start,l=(i>o.end?o.end:i)-o.start,u=t.value.substr(0,o.start),d=t.value.substr(l+o.start);if(o.node=r.wrapRangeInTextNode(o.node,h,l),t.value=u+d,t.nodes.forEach((function(e,i){i>=a&&(t.nodes[i].start>0&&i!==a&&(t.nodes[i].start-=l),t.nodes[i].end-=l)})),i-=l,n(o.node.previousSibling,o.start),!(i>o.end))return!1;e=o.end}return!0}))}},{key:"wrapMatches",value:function(t,e,i,s,n){var r=this,o=0===e?0:e+1;this.getTextNodes((function(e){e.nodes.forEach((function(e){e=e.node;for(var n=void 0;null!==(n=t.exec(e.textContent))&&""!==n[o];)if(i(n[o],e)){var a=n.index;if(0!==o)for(var c=1;c<o;c++)a+=n[c].length;e=r.wrapRangeInTextNode(e,a,a+n[o].length),s(e.previousSibling),t.lastIndex=0}})),n()}))}},{key:"wrapMatchesAcrossElements",value:function(t,e,i,s,n){var r=this,o=0===e?0:e+1;this.getTextNodes((function(e){for(var a=void 0;null!==(a=t.exec(e.value))&&""!==a[o];){var c=a.index;if(0!==o)for(var h=1;h<o;h++)c+=a[h].length;var l=c+a[o].length;r.wrapRangeInMappedTextNode(e,c,l,(function(t){return i(a[o],t)}),(function(e,i){t.lastIndex=i,s(e)}))}n()}))}},{key:"wrapRangeFromIndex",value:function(t,e,i,s){var n=this;this.getTextNodes((function(r){var o=r.value.length;t.forEach((function(t,s){var a=n.checkWhitespaceRanges(t,o,r.value),c=a.start,h=a.end;a.valid&&n.wrapRangeInMappedTextNode(r,c,h,(function(i){return e(i,t,r.value.substring(c,h),s)}),(function(e){i(e,t)}))})),s()}))}},{key:"unwrapMatches",value:function(t){for(var e=t.parentNode,i=document.createDocumentFragment();t.firstChild;)i.appendChild(t.removeChild(t.firstChild));e.replaceChild(i,t),this.ie?this.normalizeTextNode(e):e.normalize()}},{key:"normalizeTextNode",value:function(t){if(t){if(3===t.nodeType)for(;t.nextSibling&&3===t.nextSibling.nodeType;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else this.normalizeTextNode(t.firstChild);this.normalizeTextNode(t.nextSibling)}}},{key:"markRegExp",value:function(t,e){var i=this;this.opt=e,this.log('Searching with expression "'+t+'"');var s=0,n="wrapMatches",r=function(t){s++,i.opt.each(t)};this.opt.acrossElements&&(n="wrapMatchesAcrossElements"),this[n](t,this.opt.ignoreGroups,(function(t,e){return i.opt.filter(e,t,s)}),r,(function(){0===s&&i.opt.noMatch(t),i.opt.done(s)}))}},{key:"mark",value:function(t,e){var i=this;this.opt=e;var s=0,n="wrapMatches",r=this.getSeparatedKeywords("string"==typeof t?[t]:t),o=r.keywords,a=r.length,c=this.opt.caseSensitive?"":"i",h=function t(e){var r=new RegExp(i.createRegExp(e),"gm"+c),h=0;i.log('Searching with expression "'+r+'"'),i[n](r,1,(function(t,n){return i.opt.filter(n,e,s,h)}),(function(t){h++,s++,i.opt.each(t)}),(function(){0===h&&i.opt.noMatch(e),o[a-1]===e?i.opt.done(s):t(o[o.indexOf(e)+1])}))};this.opt.acrossElements&&(n="wrapMatchesAcrossElements"),0===a?this.opt.done(s):h(o[0])}},{key:"markRanges",value:function(t,e){var i=this;this.opt=e;var s=0,n=this.checkRanges(t);n&&n.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(n)),this.wrapRangeFromIndex(n,(function(t,e,s,n){return i.opt.filter(t,e,s,n)}),(function(t,e){s++,i.opt.each(t,e)}),(function(){i.opt.done(s)}))):this.opt.done(s)}},{key:"unmark",value:function(t){var e=this;this.opt=t;var i=this.opt.element?this.opt.element:"*";i+="[data-markjs]",this.opt.className&&(i+="."+this.opt.className),this.log('Removal selector "'+i+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(t){e.unwrapMatches(t)}),(function(t){var s=n.matches(t,i),r=e.matchesExclude(t);return!s||r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(t){this._opt=s({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},t)},get:function(){return this._opt}},{key:"iterator",get:function(){return new n(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),r}();function o(t){var e=this,i=new r(t);return this.mark=function(t,s){return i.mark(t,s),e},this.markRegExp=function(t,s){return i.markRegExp(t,s),e},this.markRanges=function(t,s){return i.markRanges(t,s),e},this.unmark=function(t){return i.unmark(t),e},this}return o}()),J.exports}var Gt=Zt();const Ne=Tt(Gt);var gt,G={};function Yt(){return gt||(gt=1,t=G,function(){var e={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(t){return function(t,s){var n,r,o,a,c,h,l,u,d,p=1,f=t.length,m="";for(r=0;r<f;r++)if("string"==typeof t[r])m+=t[r];else if("object"==typeof t[r]){if((a=t[r]).keys)for(n=s[p],o=0;o<a.keys.length;o++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[o],a.keys[o-1]));n=n[a.keys[o]]}else n=a.param_no?s[a.param_no]:s[p++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),e.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(e.number.test(a.type)&&(u=n>=0),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?m+=n:(!e.number.test(a.type)||u&&!a.sign?d="":(d=u?"+":"-",n=n.toString().replace(e.sign,"")),h=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(d+n).length,c=a.width&&l>0?h.repeat(l):"",m+=a.align?d+n+c:"0"===h?d+c+n:c+d+n)}return m}(function(t){if(n[t])return n[t];for(var i,s=t,r=[],o=0;s;){if(null!==(i=e.text.exec(s)))r.push(i[0]);else if(null!==(i=e.modulo.exec(s)))r.push("%");else{if(null===(i=e.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){o|=1;var a=[],c=i[2],h=[];if(null===(h=e.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(h[1]);""!==(c=c.substring(h[0].length));)if(null!==(h=e.key_access.exec(c)))a.push(h[1]);else{if(null===(h=e.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(h[1])}i[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}s=s.substring(i[0].length)}return n[t]=r}(t),arguments)}function s(t,e){return i.apply(null,[t].concat(e||[]))}var n=Object.create(null);t.sprintf=i,t.vsprintf=s,typeof window<"u"&&(window.sprintf=i,window.vsprintf=s)}()),G;var t}Yt();const q=globalThis,et=q.ShadowRoot&&(void 0===q.ShadyCSS||q.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,kt=Symbol(),mt=new WeakMap;let Qt=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==kt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(et&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=mt.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&mt.set(e,t))}return t}toString(){return this.cssText}};const te=t=>new Qt("string"==typeof t?t:t+"",void 0,kt),ee=(t,e)=>{if(et)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of e){const e=document.createElement("style"),s=q.litNonce;void 0!==s&&e.setAttribute("nonce",s),e.textContent=i.cssText,t.appendChild(e)}},vt=et?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return te(e)})(t):t,{is:se,defineProperty:ie,getOwnPropertyDescriptor:ne,getOwnPropertyNames:re,getOwnPropertySymbols:oe,getPrototypeOf:ae}=Object,K=globalThis,yt=K.trustedTypes,ce=yt?yt.emptyScript:"",he=K.reactiveElementPolyfillSupport,j=(t,e)=>t,V={toAttribute(t,e){switch(e){case Boolean:t=t?ce:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},st=(t,e)=>!se(t,e),_t={attribute:!0,type:String,converter:V,reflect:!1,useDefault:!1,hasChanged:st};Symbol.metadata??=Symbol("metadata"),K.litPropertyMetadata??=new WeakMap;let P=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=_t){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(t,i,e);void 0!==s&&ie(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){const{get:s,set:n}=ne(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:s,set(e){const r=s?.call(this);n?.call(this,e),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??_t}static _$Ei(){if(this.hasOwnProperty(j("elementProperties")))return;const t=ae(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(j("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(j("properties"))){const t=this.properties,e=[...re(t),...oe(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(vt(t))}else void 0!==t&&e.push(vt(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ee(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){const i=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,i);if(void 0!==s&&!0===i.reflect){const n=(void 0!==i.converter?.toAttribute?i.converter:V).toAttribute(e,i.type);this._$Em=t,null==n?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(t,e){const i=this.constructor,s=i._$Eh.get(t);if(void 0!==s&&this._$Em!==s){const t=i.getPropertyOptions(s),n="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:V;this._$Em=s;const r=n.fromAttribute(e,t.type);this[s]=r??this._$Ej?.get(s)??r,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){const s=this.constructor,n=this[t];if(i??=s.getPropertyOptions(t),!((i.hasChanged??st)(n,e)||i.useDefault&&i.reflect&&n===this._$Ej?.get(t)&&!this.hasAttribute(s._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:s,wrapped:n},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??e??this[t]),!0!==n||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===s&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t){const{wrapped:t}=i,s=this[e];!0!==t||this._$AL.has(e)||void 0===s||this.C(e,void 0,i,s)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}};P.elementStyles=[],P.shadowRootOptions={mode:"open"},P[j("elementProperties")]=new Map,P[j("finalized")]=new Map,he?.({ReactiveElement:P}),(K.reactiveElementVersions??=[]).push("2.1.1");const it=globalThis,X=it.trustedTypes,$t=X?X.createPolicy("lit-html",{createHTML:t=>t}):void 0,Ct="$lit$",I=`lit$${Math.random().toFixed(9).slice(2)}$`,Nt="?"+I,le=`<${Nt}>`,M=document,F=()=>M.createComment(""),H=t=>null===t||"object"!=typeof t&&"function"!=typeof t,nt=Array.isArray,ue=t=>nt(t)||"function"==typeof t?.[Symbol.iterator],Y="[ \t\n\f\r]",U=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Et=/-->/g,wt=/>/g,R=RegExp(`>|${Y}(?:([^\\s"'>=/]+)(${Y}*=${Y}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),St=/'/g,xt=/"/g,It=/^(?:script|style|textarea|title)$/i,de=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Oe=de(1),T=Symbol.for("lit-noChange"),S=Symbol.for("lit-nothing"),bt=new WeakMap,O=M.createTreeWalker(M,129);function Rt(t,e){if(!nt(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==$t?$t.createHTML(e):e}const fe=(t,e)=>{const i=t.length-1,s=[];let n,r=2===e?"<svg>":3===e?"<math>":"",o=U;for(let e=0;e<i;e++){const i=t[e];let a,c,h=-1,l=0;for(;l<i.length&&(o.lastIndex=l,c=o.exec(i),null!==c);)l=o.lastIndex,o===U?"!--"===c[1]?o=Et:void 0!==c[1]?o=wt:void 0!==c[2]?(It.test(c[2])&&(n=RegExp("</"+c[2],"g")),o=R):void 0!==c[3]&&(o=R):o===R?">"===c[0]?(o=n??U,h=-1):void 0===c[1]?h=-2:(h=o.lastIndex-c[2].length,a=c[1],o=void 0===c[3]?R:'"'===c[3]?xt:St):o===xt||o===St?o=R:o===Et||o===wt?o=U:(o=R,n=void 0);const u=o===R&&t[e+1].startsWith("/>")?" ":"";r+=o===U?i+le:h>=0?(s.push(a),i.slice(0,h)+Ct+i.slice(h)+I+u):i+I+(-2===h?e:u)}return[Rt(t,r+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),s]};class W{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let n=0,r=0;const o=t.length-1,a=this.parts,[c,h]=fe(t,e);if(this.el=W.createElement(c,i),O.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=O.nextNode())&&a.length<o;){if(1===s.nodeType){if(s.hasAttributes())for(const t of s.getAttributeNames())if(t.endsWith(Ct)){const e=h[r++],i=s.getAttribute(t).split(I),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:n,name:o[2],strings:i,ctor:"."===o[1]?ge:"?"===o[1]?me:"@"===o[1]?ve:Z}),s.removeAttribute(t)}else t.startsWith(I)&&(a.push({type:6,index:n}),s.removeAttribute(t));if(It.test(s.tagName)){const t=s.textContent.split(I),e=t.length-1;if(e>0){s.textContent=X?X.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],F()),O.nextNode(),a.push({type:2,index:++n});s.append(t[e],F())}}}else if(8===s.nodeType)if(s.data===Nt)a.push({type:2,index:n});else{let t=-1;for(;-1!==(t=s.data.indexOf(I,t+1));)a.push({type:7,index:n}),t+=I.length-1}n++}}static createElement(t,e){const i=M.createElement("template");return i.innerHTML=t,i}}function L(t,e,i=t,s){if(e===T)return e;let n=void 0!==s?i._$Co?.[s]:i._$Cl;const r=H(e)?void 0:e._$litDirective$;return n?.constructor!==r&&(n?._$AO?.(!1),void 0===r?n=void 0:(n=new r(t),n._$AT(t,i,s)),void 0!==s?(i._$Co??=[])[s]=n:i._$Cl=n),void 0!==n&&(e=L(t,n._$AS(t,e.values),n,s)),e}class pe{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,s=(t?.creationScope??M).importNode(e,!0);O.currentNode=s;let n=O.nextNode(),r=0,o=0,a=i[0];for(;void 0!==a;){if(r===a.index){let e;2===a.type?e=new B(n,n.nextSibling,this,t):1===a.type?e=new a.ctor(n,a.name,a.strings,this,t):6===a.type&&(e=new ye(n,this,t)),this._$AV.push(e),a=i[++o]}r!==a?.index&&(n=O.nextNode(),r++)}return O.currentNode=M,s}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class B{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,s){this.type=2,this._$AH=S,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=L(this,t,e),H(t)?t===S||null==t||""===t?(this._$AH!==S&&this._$AR(),this._$AH=S):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):ue(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==S&&H(this._$AH)?this._$AA.nextSibling.data=t:this.T(M.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,s="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=W.createElement(Rt(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===s)this._$AH.p(e);else{const t=new pe(s,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=bt.get(t.strings);return void 0===e&&bt.set(t.strings,e=new W(t)),e}k(t){nt(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const n of t)s===e.length?e.push(i=new B(this.O(F()),this.O(F()),this,this.options)):i=e[s],i._$AI(n),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class Z{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,s,n){this.type=1,this._$AH=S,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=S}_$AI(t,e=this,i,s){const n=this.strings;let r=!1;if(void 0===n)t=L(this,t,e,0),r=!H(t)||t!==this._$AH&&t!==T,r&&(this._$AH=t);else{const s=t;let o,a;for(t=n[0],o=0;o<n.length-1;o++)a=L(this,s[i+o],e,o),a===T&&(a=this._$AH[o]),r||=!H(a)||a!==this._$AH[o],a===S?t=S:t!==S&&(t+=(a??"")+n[o+1]),this._$AH[o]=a}r&&!s&&this.j(t)}j(t){t===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class ge extends Z{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===S?void 0:t}}class me extends Z{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==S)}}class ve extends Z{constructor(t,e,i,s,n){super(t,e,i,s,n),this.type=5}_$AI(t,e=this){if((t=L(this,t,e,0)??S)===T)return;const i=this._$AH,s=t===S&&i!==S||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,n=t!==S&&(i===S||s);s&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class ye{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){L(this,t)}}const _e=it.litHtmlPolyfillSupport;_e?.(W,B),(it.litHtmlVersions??=[]).push("3.3.1");const $e=(t,e,i)=>{const s=i?.renderBefore??e;let n=s._$litPart$;if(void 0===n){const t=i?.renderBefore??null;s._$litPart$=n=new B(e.insertBefore(F(),t),t,void 0,i??{})}return n._$AI(t),n},rt=globalThis;let D=class extends P{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=$e(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return T}};D._$litElement$=!0,D.finalized=!0,rt.litElementHydrateSupport?.({LitElement:D});const Ee=rt.litElementPolyfillSupport;Ee?.({LitElement:D}),(rt.litElementVersions??=[]).push("4.2.1");const we={attribute:!0,type:String,converter:V,reflect:!1,hasChanged:st},Se=(t=we,e,i)=>{const{kind:s,metadata:n}=i;let r=globalThis.litPropertyMetadata.get(n);if(void 0===r&&globalThis.litPropertyMetadata.set(n,r=new Map),"setter"===s&&((t=Object.create(t)).wrapped=!0),r.set(i.name,t),"accessor"===s){const{name:s}=i;return{set(i){const n=e.get.call(this);e.set.call(this,i),this.requestUpdate(s,n,t)},init(e){return void 0!==e&&this.C(s,void 0,t,e),e}}}if("setter"===s){const{name:s}=i;return function(i){const n=this[s];e.call(this,i),this.requestUpdate(s,n,t)}}throw Error("Unsupported decorator location: "+s)};function k(t){return(e,i)=>"object"==typeof i?Se(t,e,i):((t,e,i)=>{const s=e.hasOwnProperty(i);return e.constructor.createProperty(i,t),s?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}function Te(t){return k({...t,state:!0,attribute:!1})}var C=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Q=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{c(s.next(t))}catch(t){r(t)}}function a(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(o,a)}c((s=s.apply(t,e||[])).next())}))};class w extends D{static define(t,e={},i={}){var s;if(!t)throw new Error(`You have to specify a tagName to the ${this.name}.define method...`);w.setDefaultProps(t,e);const n=null!==(s=i.window)&&void 0!==s?s:window;n.customElements.get(t.toLowerCase())||n.customElements.define(t.toLowerCase(),class extends(this){})}static setDefaultProps(t,e){(t=Array.isArray(t)?t:[t]).forEach((t=>{var i;this._defaultProps[t]=Object.assign(Object.assign({},null!==(i=this._defaultProps[t])&&void 0!==i?i:{}),e)}))}injectStyle(t,e=this.tagName){-1===this.constructor._injectedStyles.indexOf(e)&&(this.constructor._injectedStyles.push(e),ut(t,{id:e}))}static getDefaultProps(t){var e,i;return Object.assign(Object.assign({},null!==(e=this._defaultProps["*"])&&void 0!==e?e:{}),null!==(i=this._defaultProps[t])&&void 0!==i?i:{})}constructor(t,e){var i,s,n,r,o,a;super(),this.id=void 0,this.lnf=!1,this.name="",this.verbose=!1,this.activeWhen=["inViewport"],this.mountWhen="direct",this.prefixEvent=!0,this.adoptStyle=!0,this.saveState=!1,this.stateId="",this.shadowDom=!1,this.classesSchema="slim",this.avoidNameClass=!1,this._internalName=this.tagName.toLowerCase(),this.state={},this._shouldUpdate=!1,this._listenersMap=new Map,this._LitElementMounted=!1,t&&(this._internalName=t),this.setAttribute("id",null!==(s=null!==(i=this.id)&&void 0!==i?i:this.getAttribute("id"))&&void 0!==s?s:`s-${Math.round(9999*Math.random())}`);const c=null===(n=this.firstUpdated)||void 0===n?void 0:n.bind(this);this.firstUpdated=()=>Q(this,void 0,void 0,(function*(){this.restoreState();const t=new MutationObserver((e=>{t.disconnect(),this.classList.add(...this.cls("")),t.observe(this,{childList:!0,attributeFilter:["class"]})}));t.observe(this,{attributes:!0,attributeFilter:["class"]}),c&&(yield c())}));const h=null===(r=this.shouldUpdate)||void 0===r?void 0:r.bind(this);this.shouldUpdate=()=>!(h&&!h())&&this._shouldUpdate;const l=Object.assign(Object.assign(Object.assign({},w.getDefaultProps(t.toLowerCase())),w.getDefaultProps(this.tagName.toLowerCase())),e??{}),u=null!==(a=null!==(o=this.getAttribute("mountWhen"))&&void 0!==o?o:l.mountWhen)&&void 0!==a?a:"direct";this._waitAndExecute(u,(()=>{this._mount()}))}update(t){super.update(t),this.classList.add(...this.cls(""))}connectedCallback(){const t=w.getDefaultProps(this.tagName.toLowerCase());for(let[e,i]of Object.entries(t))this[e]=i;for(let[t,e]of this._listenersMap.entries())e.length&&e.forEach((e=>{t.addEventListener(e.type,e.listener)}));this.classList.add(...this.cls("")),!1===this.shadowDom&&(this.createRenderRoot=()=>this);const e=this._getDocumentFromElement(this);document!==e&&this.constructor.styles&&ut(this.constructor.styles,{rootNode:e}),super.connectedCallback()}restoreState(){const t=this.stateId||this.id||this.getAttribute("id");if(this.saveState&&t){const e=localStorage.getItem(t);if(e)try{this.state=JSON.parse(e)}catch{}}}writeState(){const t=this.stateId||this.id;this.saveState&&t&&localStorage.setItem(t,JSON.stringify(this.state))}setState(t){this.state=Object.assign(Object.assign({},this.state),t),this.requestUpdate()}log(...t){if(this.verbose){let e=[];e.push(`[${this.tagName.toLowerCase()}]`),this.id&&this.id!==this.tagName.toLocaleLowerCase()&&e.push(this.id),e=[...e,...t],console.log(...e)}}_getDocumentFromElement(t){for(;t.parentNode;)t=t.parentNode;return t}addEventListenerOn(t,e,i,s){var n;if(!t)return;let r=null!==(n=this._listenersMap.get(t))&&void 0!==n?n:[];r.push({listener:i,type:e}),t!==this&&t.addEventListener(e,i,s),this._listenersMap.set(t,r)}dispatch(t,e){const i=Object.assign({$elm:this,bubbles:!0,cancelable:!0,detail:{}},e??{});let s=[],n=t;s.push(t),t.startsWith(`${this._internalName}.`)||(n=`${this._internalName}.${t}`,s.push(n),n=`${lt(this._internalName)}.${t}`,s.push(n)),t.startsWith(`${this.tagName}.`)||(n=`${this.tagName.toLowerCase()}.${t}`,s.push(n),n=`${lt(this.tagName.toLowerCase())}.${t}`,s.push(n)),s=dt(s);for(let t of s)this.log(`Dispatching event "${t}"`),i.$elm.dispatchEvent(new CustomEvent(t,i))}_adoptStyleInShadowRoot(t,e){return Pt(t,e)}internalCls(t=""){return t?`${this._internalName.toLowerCase()}${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`:this._internalName}cls(t="",e=this.classesSchema){let i="",s=[];return t?("full"===e&&`${this._internalName.toLowerCase()}`,t.split(" ").forEach((t=>{s.push(`${this._internalName.toLowerCase()}${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`),"full"===e?s.push(`${this.tagName.toLowerCase()}${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`):s.push(`${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`),this.name&&this.name!==this.tagName.toLowerCase()&&(this.avoidNameClass||("full"===e?s.push(`${this.name.toLowerCase()}${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`):s.push(`${t&&!t.match(/^(_{1,2}|-)/)?"-":""}${t}`)))})),s=s.map((t=>t.replace(/[\-]+/,"-"))),s=dt(s),s.toString=function(){return this.join(" ")},s):(s.push(this.tagName.toLowerCase()),this._internalName!==t&&s.push(this._internalName.toLowerCase()),this.name&&this.name!==this.tagName.toLowerCase()&&(this.avoidNameClass||s.push(this.name.toLowerCase())),s.toString=function(){return this.join(" ")},s)}_waitAndExecute(t,e){return new Promise(((i,s)=>Q(this,void 0,void 0,(function*(){Array.isArray(t)||(t=[t]),t.includes("direct")?yield Xt():yield Lt(this,t),e?.(this),i(this)}))))}isActive(){return!(this.activeWhen.includes("inViewport")&&!ot(this))}isMounted(){return this._LitElementMounted||this.hasAttribute("mounted")}isInViewport(){return ot(this)}mount(){}_mount(){return Q(this,void 0,void 0,(function*(){var t,e;return this.log("Mounting..."),this.lnf&&this.classList.add("-lnf"),this.mount&&"function"==typeof this.mount&&(yield this.mount()),this._shouldUpdate=!0,this.requestUpdate(),this.injectStyle(null!==(e=null===(t=this.constructor.styles)||void 0===t?void 0:t.cssText)&&void 0!==e?e:"",this.tagName),this.adoptStyle&&this.shadowRoot&&(yield this._adoptStyleInShadowRoot(this.shadowRoot)),this.setAttribute("mounted","true"),this._LitElementMounted=!0,!0}))}disconnectedCallback(){for(let[t,e]of this._listenersMap.entries())e.length&&e.forEach((e=>{t.removeEventListener(e.type,e.listener)}));super.disconnectedCallback()}}w._keepInjectedCssBeforeStylesheetLinksInited=!1,w._defaultProps={},w._injectedStyles=[],C([k({type:String})],w.prototype,"id",void 0),C([k({type:Boolean})],w.prototype,"lnf",void 0),C([k({type:String})],w.prototype,"name",void 0),C([k({type:Boolean})],w.prototype,"verbose",void 0),C([k({type:Array})],w.prototype,"activeWhen",void 0),C([k({type:String})],w.prototype,"mountWhen",void 0),C([k({type:Boolean})],w.prototype,"prefixEvent",void 0),C([k({type:Boolean})],w.prototype,"adoptStyle",void 0),C([k({type:Boolean})],w.prototype,"saveState",void 0),C([k({type:String})],w.prototype,"stateId",void 0),C([k({type:Boolean})],w.prototype,"shadowDom",void 0),C([k({type:String})],w.prototype,"classesSchema",void 0),C([k({type:Boolean})],w.prototype,"avoidNameClass",void 0);const xe={CHILD:2},be=t=>(...e)=>({_$litDirective$:t,values:e});class Ae{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}class tt extends Ae{constructor(t){if(super(t),this.it=S,t.type!==xe.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===S||null==t)return this._t=void 0,this.it=t;if(t===T)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}tt.directiveName="unsafeHTML",tt.resultType=1;const Pe=be(tt);export{w as L,Ne as M,Wt as c,k as n,Pe as o,Te as r,dt as u,Oe as x};