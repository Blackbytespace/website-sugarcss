import{c as Ee,u as Ie,M as Ae,r as M,n as b,L as xe,o as V,x as $}from"./unsafe-html.9C37xFpn.js";import{g as Se,v as Y}from"./whenAttribute.DSu4UzAh.js";import{t as Le}from"./toSlug.BfO33xO0.js";import{o as Oe,s as ke,d as Re}from"./distanceFromElementTopToViewportTop.-eC_Bslg.js";import"./is-class.C7EF8Sfu.js";function Pe(e,t){const i=Object.assign({quotesToRemove:['"',"'","”","`"]},{});return e=e.trim(),i.quotesToRemove.forEach((t=>{e.substr(0,1)!==t||e.substr(-1)!==t||(e=(e=e.substr(1)).substr(0,e.length-1))})),e}function Ne(e){const t=Oe(e),i=ke();return window.innerHeight-t.top+i}function qe(e,t,i){const s=Object.assign({offset:20,once:!1,times:-1},{});let n=!1,r=e,o=e;e===window.document.body?(n=!0,r=document,o=window.document.body):e===window.document&&(n=!0,e=document.body,o=document.body);let a=!0,l=0;const c=e=>{let i,d,u;n?(d=window.innerHeight,u=o.scrollTop,i=Math.max(window.document.body.scrollHeight,window.document.documentElement.scrollHeight,window.document.body.offsetHeight,window.document.documentElement.offsetHeight,window.document.body.clientHeight,window.document.documentElement.clientHeight)):(d=o.offsetHeight,u=o.scrollTop,i=o.scrollHeight),a&&u+d>=i-s.offset?(t(),l++,(s.once||s.times>0&&l>=s.times)&&(r.removeEventListener("scroll",c),a=!1)):o.offsetHeight+o.scrollTop<o.scrollHeight-s.offset&&(a=!0)};r.addEventListener("scroll",c)}function He(e,t){let i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)}function Ce(e,t,i){const s=Object.assign({},i??{});let n,r=1/0;const o=e.getBoundingClientRect();for(let[i,a]of Object.entries(t)){if(a===e)continue;const t=a.getBoundingClientRect();let i;switch(s.direction){case"top":if(t.top>o.top)continue;break;case"right":if(t.left<o.right)continue;break;case"bottom":if(t.bottom<o.bottom)continue;break;case"left":if(t.right>o.left)continue}i=He(o,t),i<r&&(r=i,n=a)}return n}function Me(e){return Ee(e)}function De(e){if("string"!=typeof e)return e;if("true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1;if("null"===e.toLowerCase())return null;if("undefined"===e.toLowerCase())return;e=e.split("⠀").join("").trim();const t=Number(e);if(!isNaN(t))return Number.isInteger(t)?t:parseFloat(e);try{const t=JSON.parse(e);if(t)return t}catch{}return e}function J(e,t){if(!e)return;const i=window.getComputedStyle(e),s=["","webkit-","moz-","ms-","o-","khtml-"];for(let e=0;e<s.length;e++){const n=i[Me(`${s[e]}${t}`)];if(n&&""!==n.trim())return De(n)}return null}function je(e){var t;return(null===(t=e.parentElement)||void 0===t?void 0:t.querySelector(":focus-within"))===e}function Q(){return!(!("ontouchstart"in document.documentElement)||void 0===window.orientation||!window.matchMedia("only screen and (max-width: 639px)").matches||!window.matchMedia("(pointer: coarse)").matches)}function Ve(e){const t={a:/[áàâãªä]/gm,A:/[ÁÀÂÃÄ]/gm,I:/[ÍÌÎÏ]/gm,i:/[íìîï]/gm,e:/[éèêë]/gm,E:/[ÉÈÊË]/gm,o:/[óòôõºö]/gm,O:/[ÓÒÔÕÖ]/gm,u:/[úùûü]/gm,U:/[ÚÙÛÜ]/gm,c:/ç/gm,C:/Ç/gm,n:/ñ/gm,N:/Ñ/gm,"-":/–/gm," ":/[’‘‹›‚“”«»„[] ]/gm};return Object.keys(t).forEach((i=>{e=e.replace(t[i],i)})),e}function Fe(e,t){t=Object.assign({exclude:[]},t??{}),e=Ve(e=e.replace(/\s/gm,"-"));const i={"/":"-","@":"",".":"-",",":"-","\\":"-","(":"-",")":"-","{":"-","}":"-","[":"-","]":"-","=":"-","?":"-","!":"-","&":"-","%":"-","*":"-",'"':"-","'":"-","`":"-","+":"-","°":"-",$:"-","<":"-",">":"-",":":"-","#":"-"};return t.exclude.forEach((e=>{delete i[e]})),Object.keys(i).forEach((t=>{e=e.split(t).join(i[t])})),e=(e=(e=(e=(e=(e=(e=e.replace(/\.{2,999}/gm,".")).replace(/^-{1,999}/gm,"")).replace(/-{1,999}$/gm,"")).replace(/-{2,999}/gm,"-")).replace(/[^a-zA-Z0-9]{1,999}$/,"")).replace(/^[^a-zA-Z0-9]{1,999}/,"")).toLowerCase()}function Be(e,t){if(Array.isArray(t))return ee(e,t);if(void 0!==e[t])return e[t];if(!t||""===t||"."===t)return e;let i=[(t=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/\\\./g,"_dot_")).replace(/^\./,"")).replace(/\?/gm,"")];const s=t.split(".");for(let e=s.length-1;e>=0;e--)if(s[e].match(/\?$/)){const t=s.slice(0,e),n=s.slice(e+1);i.push([...t,...n].join(".")),i.push([...t,...n.filter((e=>!e.match(/\?$/)))].join("."))}i=Ie(i.map((e=>e.replace(/\?/gm,""))));for(let t=0;t<i.length;t++){const s=ee(e,i[t]);if(void 0!==s)return s}}function ee(e,t){let i,s=e;if("string"==typeof t){if(void 0!==e[t])return e[t];if(!t||""===t||"."===t)return e;t=t.split(/(?!\B"[^"]*)\.(?![^"]*"\B)/gm)}for(i=[...t].map((e=>"string"==typeof e?Pe(e):e));i.length;){let e=i.shift();if("string"==typeof e&&(e=e.replace(/\?$/,"")),"object"!=typeof s||!s||!(e in s))return;s=s[e]}return s}function Ke(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ue(e,t,i){const s=Object.assign({class:"-highlight"},i??{});let n,r;"string"==typeof e?(r=document.createElement("div"),r.innerHTML=e,n="string"):e instanceof HTMLElement&&(r=e,n="element");const o=new Ae(r),a={className:s.class};return t instanceof RegExp?o.markRegExp(t,a):(Array.isArray(t)||"string"==typeof t)&&o.mark(t,a),"string"===n?r.innerHTML:r}var F,Xe={};function x(e,t){var i,s,n,r;const o=Object.assign({tokens:{}},{}),a=null!==(s=null===(i=Xe)||void 0===i?void 0:i.I18N)&&void 0!==s?s:{};let l;o.id&&(l=null!==(n=a[o.id])&&void 0!==n?n:Be(a,o.id)),l||(l=null!==(r=a[e])&&void 0!==r?r:e),a[e]||(a._missing||(a._missing={}),a._missing[e]=e);const c=` ${l} `.match(/(__\([^__\)]*\)__|(?!\|)%[a-zA-Z0-9])/gm);if(!c)return l;function d(e){var t,i;return null!==(i=null!==(t=o.tokens[e])&&void 0!==t?t:o.tokens[e.replace(/^%/,"")])&&void 0!==i?i:e}let u;return c.forEach((e=>{var t;if(e.match(/^%/)){u=e;const t=d(e);l=l.replaceAll(new RegExp(`([^(])?${e}`,"g"),`$1${t}`)}else{const i=e.match(/\|(%[a-zA-Z0-9]+)\)__/),s=null!==(t=i?.[1])&&void 0!==t?t:u,n=d(s);if("number"!=typeof n)return void(l=l.replace(e,`**(invalid token "${s}" for pluralization)**`));let r=(e=e.replace(/\\\|/gm,"_$_")).split(/\|/gm);r=r.map((e=>e.replace(/_\$_/gm,"|").replace(/^__\(/,"").replace(/\)__$/,""))),e=e.replace(/_\$_/gm,"\\|"),1===r.length?l=l.replace(e,n>1?r[0]:""):2===r.length&&r[0].match(/^%[a-zA-Z0-9]+/)?l=l.replace(e,n>1?r[1]:""):2!==r.length||r[0].match(/^%[a-zA-Z0-9]+/)?3===r.length&&(l=l.replace(e,n>1?r[2]:r[1])):l=l.replace(e,n>1?r[1]:r[0])}})),l}null!==(F=window.process)&&void 0!==F&&F.env?window.process.env.I18N||(window.process.env.I18N={}):window.process={env:{I18N:{}}};var te,H={exports:{}},ze=H.exports;function Ye(){return te||(te=1,e=H,function(t){if("function"!=typeof i){var i=function(e){return e};i.nonNative=!0}const s=i("plaintext"),n=i("html"),r=i("comment"),o=/<(\w*)>/g,a=/<\/?([^\s\/>]+)/;function l(e,t,i){return d(e=e||"",c(t=t||[],i=i||""))}function c(e,t){return e=function(e){let t=new Set;if("string"==typeof e){let i;for(;i=o.exec(e);)t.add(i[1])}else i.nonNative||"function"!=typeof e[i.iterator]?"function"==typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}(e),{allowable_tags:e,tag_replacement:t,state:s,tag_buffer:"",depth:0,in_quote_char:""}}function d(e,t){if("string"!=typeof e)throw new TypeError("'html' parameter must be a string");let i=t.allowable_tags,o=t.tag_replacement,a=t.state,l=t.tag_buffer,c=t.depth,d=t.in_quote_char,h="";for(let t=0,m=e.length;t<m;t++){let m=e[t];if(a===s)"<"===m?(a=n,l+=m):h+=m;else if(a===n)switch(m){case"<":if(d)break;c++;break;case">":if(d)break;if(c){c--;break}d="",a=s,l+=">",i.has(u(l))?h+=l:h+=o,l="";break;case'"':case"'":d=m===d?"":d||m,l+=m;break;case"-":"<!-"===l&&(a=r),l+=m;break;case" ":case"\n":if("<"===l){a=s,h+="< ",l="";break}l+=m;break;default:l+=m}else a===r&&(">"===m?("--"==l.slice(-2)&&(a=s),l=""):l+=m)}return t.state=a,t.tag_buffer=l,t.depth=c,t.in_quote_char=d,h}function u(e){let t=a.exec(e);return t?t[1].toLowerCase():null}l.init_streaming_mode=function(e,t){let i=c(e=e||[],t=t||"");return function(e){return d(e||"",i)}},e.exports?e.exports=l:t.striptags=l}(ze)),H.exports;var e}var We=Ye();const Ze=Se(We);function Ge(e,t=[],i=""){return Ze(e,t,i)}var B,ie,K,se,U,ne;function Je(){return ie||(ie=1,B=function(e){return typeof e<"u"&&null!==e&&("object"==typeof e||"function"==typeof e)}),B}function Qe(){if(se)return K;se=1;var e=Je();function t(e,t){for(var s in t)i(t,s)&&(e[s]=t[s])}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return K=function(i){e(i)||(i={});for(var s=arguments.length,n=1;n<s;n++){var r=arguments[n];e(r)&&t(i,r)}return i},K}function et(){if(ne)return U;ne=1;var e,t=Qe(),i={},s={default:{"&quot;":'"',"&#34;":'"',"&apos;":"'","&#39;":"'","&amp;":"&","&#38;":"&","&gt;":">","&#62;":">","&lt;":"<","&#60;":"<"},extras:{"&cent;":"¢","&#162;":"¢","&copy;":"©","&#169;":"©","&euro;":"€","&#8364;":"€","&pound;":"£","&#163;":"£","&reg;":"®","&#174;":"®","&yen;":"¥","&#165;":"¥"}};function n(e,t){if(!function(e){return e&&"string"==typeof e}(e))return"";var n=s[t||"default"],r=function(e,t){if(i[e])return i[e];var s=Object.keys(t).join("|"),n=new RegExp("(?=("+s+"))\\1","g");return i[e]=n,n}(t,n);return e.replace(r,(function(e){return n[e]}))}return Object.defineProperty(s,"all",{get:function(){return e||(e=t({},s.default,s.extras))}}),n.chars=s.default,n.extras=s.extras,Object.defineProperty(n,"all",{get:function(){return s.all}}),U=n}et();let S=[];const re=new WeakMap;let X=!1;class tt extends Promise{cancel(){}}function it(e,t){const i=new tt((t=>{var s;const n=Object.assign({ctx:document},{});(Array.isArray(n.ctx)?n.ctx:[n.ctx]).forEach((e=>{re.has(e)||(re.set(e,!0),e.addEventListener("keydown",(e=>{var t;if("Escape"!==e.key||!S.length||X)return;X=!0,setTimeout((()=>{X=!1}));const i=S.pop();null===(t=i.callback)||void 0===t||t.call(i),i.resolve()})))}));const r={id:null!==(s=n.id)&&void 0!==s?s:Y(),callback:e,resolve:t};if(setTimeout((()=>{i.cancel=()=>{S=S.filter((e=>e.id!==r.id)),Promise.resolve(i)}})),n.id){const i=S.find((e=>e.id===n.id));i?(i.callback=e,i.resolve=t):S.push(r)}else S.push(r)}));return i}function C(e,t,i){const s=Object.assign({ctx:document.body,preventDefault:!0},{});if(Array.isArray(e)){const i=e.map((e=>C(e,t)));return{cancel:()=>{i.forEach((e=>{e.cancel()}))}}}const n=e.split("+").map((e=>"command"===e||"cmd"===e?"meta":"escape"===e||"esc"===e?"Escape":e)),r=n[n.length-1],o=["shift","ctrl","alt","meta"],a=n.filter((e=>o.includes(e))).length>1,l=e=>{const i=document.activeElement;if(("INPUT"===i?.tagName||"TEXTAREA"===i?.tagName||i?.hasAttribute("contenteditable"))&&!n.includes("meta")&&!n.includes("ctrl")&&"Escape"!==r||e.key!==r)return;let o=[e.shiftKey,e.ctrlKey,e.altKey,e.metaKey].filter((e=>e)).length>1,l=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;n.length>1&&!l||a&&!o||e.ctrlKey&&!n.includes("ctrl")||e.metaKey&&!n.includes("meta")||e.altKey&&!n.includes("alt")||e.shiftKey&&!n.includes("shift")||(s.preventDefault&&e.preventDefault(),t(e))};return s.ctx.addEventListener("keydown",l),{cancel:()=>{s.ctx.removeEventListener("keydown",l)}}}var g=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},L=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(o,a)}l((s=s.apply(e,t||[])).next())}))};class v extends xe{constructor(){super("s-advanced-select"),this._displayedMaxItems=0,this._filterValue="",this._items=[],this._filteredItems=[],this._isLoading=!1,this.items=[],this.value="value",this.label="label",this.showKeywords=!1,this.emptyText=x("No items found..."),this.loadingText=x("Loading, please wait..."),this.minChars=1,this.filtrable=[],this.highlightable=[],this.closeTimeout=100,this.notSelectable=!1,this.maxItems=-1,this.classes={},this.inline=!1,this._$container=document.createElement("div"),this._$list=document.createElement("ul"),this._$dropdown=document.createElement("div"),this._$input=document.createElement("input"),this._templatesFromHtml={},this._isArrowUsed=!1,this._baseTemplates=e=>{},this._currentItemIdx=0}mount(){return L(this,void 0,void 0,(function*(){if(this._displayedMaxItems=this.maxItems,"string"==typeof this.filtrable&&(this.filtrable=this.filtrable.split(",").map((e=>e.trim()))),this.filtrable.length||(this.filtrable.push("id"),this.filtrable.push("value"),"string"==typeof this.label&&this.filtrable.push(this.label)),this.highlightable.length||"string"==typeof this.label&&this.highlightable.push(this.label),!this.filtrable.length)throw new Error('Sorry but you have to specify at least one property in the "filtrable" item property...');this._baseTemplates=({type:e,item:t,$items:i,html:s})=>{switch(e){case"item":return s`
            ${V("function"==typeof this.label?x(this.label({item:t})):x(t[this.label]))}
          `;case"group":return s` <div class="${this.cls("_group-label")}">
              <span class="${this.cls("_group-label-inner")}">
                ${x(t.label)}
              <span>
            </div>
            <div class="${this.cls("_group-items")}">
              <ul class="${this.cls("_group-items-inner")}">${i}</ul>
          </div>`;case"empty":return s` <div>${x(this.emptyText)}</div> `;case"loading":return s`
            <div class="${this.cls("_loading")}">
              ${x(this.loadingText)}
            </div>
          `}},this._grabTemplatesFromDom(),this._initListeners(),je(this)&&setTimeout((()=>{this.focus()}))}))}updated(e){e.has("_isLoading")&&(this._isLoading?this.dispatch("loading"):this.dispatch("loaded")),this._filterValue?this.classList.add("-filtered"):this.classList.remove("-filtered"),this._isLoading?this.classList.add("-loading"):this.classList.remove("-loading"),this._filteredItems.length?this.classList.remove("-empty"):this.classList.add("-empty"),this.inline?this.classList.add("-inline"):this.classList.remove("-inline")}firstUpdated(){return L(this,void 0,void 0,(function*(){var e,t;this._$input=null!==(e=this.querySelector("input"))&&void 0!==e?e:document.createElement("input"),!(null===(t=this._$input)||void 0===t)&&t.parentElement||this.appendChild(this._$input),this._$input.setAttribute("autocomplete","off"),this._$form=this._$input.form,this.addEventListenerOn(this._$input,"keydown",(e=>{"Escape"===e.key&&e.preventDefault()})),this.addEventListenerOn(this._$form,"submit",(e=>{this.isActive()&&e.preventDefault()})),this.addEventListenerOn(this._$input,"keyup",(e=>L(this,void 0,void 0,(function*(){if(!this.isActive()||this._filterValue===e.target.value)return;this.resetPreselected(),this.resetSelected();const t=e.target.value;this._filterValue=t,this._displayedMaxItems=this.maxItems,"function"==typeof this.items?yield this.refreshItems():this._filterItems()})))),this.addEventListenerOn(this._$input,"focus",(e=>{if(!this.isActive())return;const t=e.target.value;this._filterValue=t,this._open(),this._updateListSizeAndPosition()})),this._$input.classList.add(...this.cls("_input")),this.classes.input&&this._$input.classList.add(this.classes.input),this._$container=this,this._$container.classList.add(...this.cls()),this.classes.container&&this._$container.classList.add(this.classes.container),this._$list=this.querySelector("ul"),this._$dropdown=this.querySelector(`.${this.internalCls("_dropdown")}`),this.addEventListenerOn(document,"scroll",(()=>{this._updateListSizeAndPosition()})),this._updateListSizeAndPosition(),qe(this._$list,(()=>{var e;-1!==this.maxItems&&(this._displayedMaxItems=(null!==(e=this._displayedMaxItems)&&void 0!==e?e:0)+this.maxItems,this._filterItems())})),this.addEventListenerOn(document,"keydown",(e=>{var t;if(!this.isActive()||!this._filteredItems.length)return;const i={ArrowDown:"bottom",ArrowUp:"top",ArrowLeft:"left",ArrowRight:"right"};if(!i[e.key])return;this._isArrowUsed=!0,clearTimeout(this._isArrowUsedTimeout),this._isArrowUsedTimeout=setTimeout((()=>{this._isArrowUsed=!1}),100);const s=this.querySelectorAll(`.${this.internalCls("_item")}.-match`),n=this.querySelector(`.${this.internalCls("_item")}.-preselected`)||this.querySelector(`.${this.internalCls("_item")}.-selected`)||this.querySelectorAll(`.${this.internalCls("_item")}`)[0];if(this.getPreselectedItem()){let t=Ce(n,s,{direction:i[e.key]});if(!t)return;const r=t.dataset.id;r&&this.preselect(r,{scrollIntoView:!0})}else{const e=null===(t=s[0])||void 0===t?void 0:t.dataset.id;e&&this.preselect(e,{scrollIntoView:!0})}})),this.addEventListenerOn(document,"keyup",(e=>{"Enter"===e.key&&(e.preventDefault(),this.isActive()&&this.select())})),this._filterValue&&this.setSearch(this._filterValue),this._$input.value&&(this._filterValue=this._$input.value),this.inline&&this.refreshItems()}))}_initListeners(){this.hotkey&&C(this.hotkey,(()=>{this.focus()}))}_grabTemplatesFromDom(){this.querySelectorAll("template").forEach((e=>{e.hasAttribute("type")&&(this._templatesFromHtml[e.getAttribute("type")]=e.innerHTML)}))}_renderTemplate(e){const t=Object.assign({type:"item",item:null,$items:[],html:$,unsafeHTML:V,idx:0},e);if(this.templates){const e=this.templates(t);if(e)return e}return this._templatesFromHtml[t.type]?$` ${V(this._templatesFromHtml[t.type])} `:this._baseTemplates(t)}preselect(e,t){"string"==typeof e&&(e=this.getItemById(e));const i=this.getPreselectedItem();if(i&&(i.state.preselected=!1),!this.notSelectable&&e.state.match){if(t?.scrollIntoView){const t=this.getItemDomElement(e);t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}e.state.preselected=!0,t?.preventFocus||setTimeout((()=>{this.focus()})),this.requestUpdate()}}resetPreselected(){const e=this.getPreselectedItem();e&&(e.state.preselected=!1)}setSearch(e){return L(this,void 0,void 0,(function*(){this._$input.value=e,this._filterValue=e,yield this.refreshItems(),this.requestUpdate()}))}select(e=this.getPreselectedItem()){"string"==typeof e&&(e=this.getItemById(e));const t=this.getPreselectedItem();t&&(t.state.preselected=!1);const i=this.getSelectedItem();i&&(i.state.selected=!1),!this.notSelectable&&e.state.match&&(e.state.selected=!0,setTimeout((()=>{var t;e.preventSet?this.setSearch(""):this.setSearch(null!==(t=e.value)&&void 0!==t?t:e.id),e.preventClose&&this.focus()})),e.preventClose||this._close(),e.preventSelect||this.dispatch("select",{detail:{item:e,$elm:this.querySelector(`.${this.internalCls("_item")}[data-internal-id="${e._internalId}"]`)}}),this.requestUpdate())}resetSelected(){const e=this.getSelectedItem();e&&(e.state.selected=!1)}getItemDomElement(e){return this.querySelector(`.${this.internalCls("_item")}[data-id="${e.id}"]`)}reset(){this.resetPreselected(),this.resetSelected(),this.setSearch(""),this.dispatch("reset")}getItemById(e){return this._filteredItems.find((t=>t.id===e))}getPreselectedItem(){return this._filteredItems.find((e=>e.state.preselected))}getSelectedItem(){return this._filteredItems.find((e=>e.state.selected))}getMatchItems(){return this._filteredItems.filter((e=>e.state.match))}_open(){return L(this,void 0,void 0,(function*(){it((()=>{this.isActive()&&(this.reset(),this._close())})),this.dispatch("open"),yield this.refreshItems()}))}_close(){var e;null===(e=document.activeElement)||void 0===e||e.blur(),this.dispatch("close")}focus(){this._$input.focus()}blur(){this._$input.blur(),this._close()}refreshItems(){return L(this,void 0,void 0,(function*(){if(clearTimeout(this._isLoadingTimeout),this._isLoadingTimeout=setTimeout((()=>{this._isLoading=!0}),100),this.items){if("string"==typeof this.items)try{this._items=JSON.parse(this.items)}catch{const e=document.querySelector(this.items);e&&(this._items=JSON.parse(e.innerHTML.trim()))}else"function"==typeof this.items?this._items=yield this.items({search:this._filterValue,items:this._items}):this._items=this.items;this.dispatch("items",{detail:{items:this._items}})}this._initItems(this._items),yield this._filterItems(),clearTimeout(this._isLoadingTimeout),this._isLoading=!1;const e=this.querySelector(`.${this.internalCls("_item")}.-selected`);e?this.preselect(e?.dataset.id,{preventFocus:!0,scrollIntoView:!0}):this._filteredItems.length&&this.preselect(this._filteredItems[0],{preventFocus:!0,scrollIntoView:!0})}))}_initItems(e){return e.map((e=>(e.items&&(e.items=this._initItems(e.items)),this._initItem(e))))}_initItem(e){if("group"!==e.type)return e.state||(e.state={match:!0,preselected:!1,selected:!1}),e.id||(e.id=Y()),e.type||(e.type="item"),e}_getItemsOnly(){const e=[];return this._items.forEach((t=>{var i;"group"==t.type?null===(i=t.items)||void 0===i||i.forEach((t=>{e.push(t)})):e.push(t)})),e}_filterItems(){return L(this,void 0,void 0,(function*(){if(this._filterValue&&this._filterValue.length<this.minChars)return;this._isLoading=!0;const e=this._getItemsOnly();let t=this._filterValue;this.filterValuePreprocess&&(t=this.filterValuePreprocess(t)),t=Ke(t);let i=e;if(this.filterItems)i=yield this.filterItems(i,t,this);else{if(!this.filtrable.length)return!0;i=i.filter((e=>{let i=!1;for(let s=0;s<Object.keys(e).length;s++){const n=Object.keys(e)[s];if("string"!=typeof e[n])continue;const r=Ge(e[n]);if(e._original||Object.defineProperty(e,"_original",{value:{},writable:!0,configurable:!1,enumerable:!1}),e._original[n]||(e._original[n]=e[n]),-1!==this.filtrable.indexOf(n)){const s=t.split(" ").map((e=>e.replace(/[^a-zA-Z0-9 ]/g,"").trim())).filter((e=>""!==e)),o=new RegExp(`${t}`.split(" ").map((e=>e.replace(/[^a-zA-Z0-9 ]+/g,"").trim())).join("|"),"gi");if(r.match(o))if(i=!0,this.highlightable.includes(n)&&t&&""!==t){let t=e._original[n];t=Ue(t,s,{class:this.cls("_highlight").join(" ")}),e[n]=t}else e[n]=e._original[n];else e[n]=e._original[n]}}return e.state.match=i,i}))}this._filteredItems=i,this._isLoading=!1}))}_updateListSizeAndPosition(){if(!this.isActive()||this.inline||!this._$dropdown)return;const e=J(this._$dropdown,"marginTop"),t=J(this._$dropdown,"marginBottom"),i=Re(this._$input),s=Ne(this._$input)-this._$input.clientHeight;let n;i>s?(this._$container.classList.add("-top"),this._$dropdown.style.top="auto",this._$dropdown.style.bottom=`calc(100% - ${t})`,n=i-parseInt(e)):(this._$container.classList.remove("-top"),this._$dropdown.style.bottom="auto",this._$dropdown.style.top=`calc(100% - ${e})`,n=s-parseInt(t)),this._$dropdown.style.maxHeight=`${n}px`}_removeKeyword(e){const t=this._filterValue.split(" ").filter((t=>t!==e)).join(" ");this.setSearch(t)}_renderItems(e,t=!1){return $`${e.map(((e,i)=>this._renderItem(e,i,t)))}`}_renderItem(e,t,i=!1){var s,n,r,o;if(this._currentItemIdx++,e._internalId||Object.defineProperty(e,"_internalId",{value:`s-${Y()}`,writable:!1,enumerable:!1,configurable:!1}),!(-1!==this.maxItems&&this._currentItemIdx>this._displayedMaxItems))return $`
      <li
        data-id="${e.id}"
        data-internal-id="${e._internalId}"
        @pointerup=${()=>this.select(e)}
        @mouseover=${()=>{this._isArrowUsed||(this.preselect(e),this.requestUpdate())}}
        style="z-index: ${999999999-t}"
        tabindex="-1"
        class="${this.cls("_item")} ${this.classes.item} ${i?this.cls("_group-item"):""} ${null!==(s=e.state)&&void 0!==s&&s.selected?"-selected":""} ${null!==(n=e.state)&&void 0!==n&&n.preselected?"-preselected":""} ${this._filterValue?"-filtered":""} ${null!==(r=e.state)&&void 0!==r&&r.match?"-match":""}"
      >
        ${this._renderTemplate({type:null!==(o=e.type)&&void 0!==o?o:"item",item:e,idx:t})}
      </li>
    `}render(){this._currentItemIdx=0;const e=this._renderTemplate({type:"before"}),t=this._renderTemplate({type:"after"}),i=this._renderTemplate({type:"empty"});return $`
      <div class="${this.cls("_dropdown")} ${this.classes.dropdown}">
        ${e?$`
              <div
                class="${this.cls("_before")} ${this.classes.before}"
                tabindex="-1"
              >
                ${e}
              </div>
            `:""}
        ${this._$input&&this._$input.value&&this.showKeywords?$`
              <div
                tabindex="-1"
                class="${this.cls("_keywords")} ${this.classes.keywords}"
              >
                ${this._$input.value.split(" ").filter((e=>""!==e)).map((e=>$`
                      <span
                        tabindex="-1"
                        @click=${()=>this._removeKeyword(e)}
                        class="${this.cls("_keyword")}"
                        >${x(e)}</span
                      >
                    `))}
              </div>
            `:""}
        <ul class="${this.cls("_items")} ${this.classes.items}">
          ${this._isLoading?$`
                <li class="${this.classes.item} ${this.cls("_loading")}">
                  ${this._renderTemplate({type:"loading"})}
                </li>
              `:!this._isLoading&&this._filteredItems.length<=0&&i?$`
                <li class="${this.classes.item} ${this.cls("_empty")}">
                  ${i}
                </li>
              `:this._isLoading?"":this._items.map(((e,t)=>{var i,s,n,r;if("group"===e.type){const t=this._renderItems(null!==(i=e.items)&&void 0!==i?i:[],!0);return $`
                      <li
                        class="${this.classes.group} ${this.cls("_group")}"
                        group="${null!==(r=null!==(n=null!==(s=e[this.label])&&void 0!==s?s:e.label)&&void 0!==n?n:e.title)&&void 0!==r?r:e.name}"
                      >
                        ${this._renderTemplate({type:"group",$items:t,item:e})}
                      </li>
                    `}return $` ${this._renderItem(e,t)} `}))}
        </ul>
        ${t?$`
              <div
                class="${this.cls("_after")} ${this.classes.after}"
                tabindex="-1"
              >
                ${t}
              </div>
            `:""}
      </div>
    `}}g([M()],v.prototype,"_filterValue",void 0),g([M()],v.prototype,"_items",void 0),g([M()],v.prototype,"_filteredItems",void 0),g([M()],v.prototype,"_isLoading",void 0),g([b()],v.prototype,"items",void 0),g([b()],v.prototype,"value",void 0),g([b()],v.prototype,"label",void 0),g([b({type:Boolean})],v.prototype,"showKeywords",void 0),g([b({type:String})],v.prototype,"emptyText",void 0),g([b({type:String})],v.prototype,"loadingText",void 0),g([b({type:Function})],v.prototype,"filterValuePreprocess",void 0),g([b({type:String})],v.prototype,"hotkey",void 0),g([b({type:Function})],v.prototype,"filterItems",void 0),g([b({type:Number})],v.prototype,"minChars",void 0),g([b({type:Array})],v.prototype,"filtrable",void 0),g([b({type:Array})],v.prototype,"highlightable",void 0),g([b({type:Object})],v.prototype,"templates",void 0),g([b({type:Number})],v.prototype,"closeTimeout",void 0),g([b({type:Boolean})],v.prototype,"notSelectable",void 0),g([b({type:Number})],v.prototype,"maxItems",void 0),g([b({type:Object})],v.prototype,"classes",void 0),g([b({type:Boolean})],v.prototype,"inline",void 0);const st={},k="data-astro-transition-persist",nt=["data-astro-transition","data-astro-transition-fallback"],oe=new Set;function he(e){const t=e.src?new URL(e.src,location.href).href:e.textContent;return!!oe.has(t)||(oe.add(t),!1)}function rt(e){for(const t of e.scripts)!t.hasAttribute("data-astro-rerun")&&he(t)&&(t.dataset.astroExec="")}function ot(e){const t=document.documentElement,i=[...t.attributes].filter((({name:e})=>(t.removeAttribute(e),nt.includes(e))));[...e.documentElement.attributes,...i].forEach((({name:e,value:i})=>t.setAttribute(e,i)))}function at(e){for(const t of Array.from(document.head.children)){const i=ut(t,e);i?i.remove():t.remove()}document.head.append(...e.head.children)}function lt(e,t){t.replaceWith(e);for(const i of t.querySelectorAll(`[${k}]`)){const t=i.getAttribute(k),s=e.querySelector(`[${k}="${t}"]`);s&&(s.replaceWith(i),"astro-island"===s.localName&&dt(i)&&!ft(i,s)&&(i.setAttribute("ssr",""),i.setAttribute("props",s.getAttribute("props"))))}me(e)}function me(e){e.querySelectorAll("template[shadowrootmode]").forEach((e=>{const t=e.getAttribute("shadowrootmode"),i=e.parentNode;if(("closed"===t||"open"===t)&&i instanceof HTMLElement){if(i.shadowRoot)return void e.remove();const s=i.attachShadow({mode:t});s.appendChild(e.content),e.remove(),me(s)}}))}const ct=()=>{const e=document.activeElement;if(e?.closest(`[${k}]`)){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const t=e.selectionStart,i=e.selectionEnd;return()=>z({activeElement:e,start:t,end:i})}return()=>z({activeElement:e})}return()=>z({activeElement:null})},z=({activeElement:e,start:t,end:i})=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&("number"==typeof t&&(e.selectionStart=t),"number"==typeof i&&(e.selectionEnd=i)))},ut=(e,t)=>{const i=e.getAttribute(k),s=i&&t.head.querySelector(`[${k}="${i}"]`);if(s)return s;if(e.matches("link[rel=stylesheet]")){const i=e.getAttribute("href");return t.head.querySelector(`link[rel=stylesheet][href="${i}"]`)}return null},dt=e=>{const t=e.dataset.astroTransitionPersistProps;return null==t||"false"===t},ft=(e,t)=>e.getAttribute("props")===t.getAttribute("props"),ht=e=>{rt(e),ot(e),at(e);const t=ct();lt(e.body,document.body),t()},mt="astro:before-preparation",pt="astro:after-preparation",vt="astro:before-swap",gt="astro:after-swap",yt=e=>document.dispatchEvent(new Event(e));class pe extends Event{from;to;direction;navigationType;sourceElement;info;newDocument;signal;constructor(e,t,i,s,n,r,o,a,l,c){super(e,t),this.from=i,this.to=s,this.direction=n,this.navigationType=r,this.sourceElement=o,this.info=a,this.newDocument=l,this.signal=c,Object.defineProperties(this,{from:{enumerable:!0},to:{enumerable:!0,writable:!0},direction:{enumerable:!0,writable:!0},navigationType:{enumerable:!0},sourceElement:{enumerable:!0},info:{enumerable:!0},newDocument:{enumerable:!0,writable:!0},signal:{enumerable:!0}})}}class _t extends pe{formData;loader;constructor(e,t,i,s,n,r,o,a,l,c){super(mt,{cancelable:!0},e,t,i,s,n,r,o,a),this.formData=l,this.loader=c.bind(this,this),Object.defineProperties(this,{formData:{enumerable:!0},loader:{enumerable:!0,writable:!0}})}}class bt extends pe{direction;viewTransition;swap;constructor(e,t){super(vt,void 0,e.from,e.to,e.direction,e.navigationType,e.sourceElement,e.info,e.newDocument,e.signal),this.direction=e.direction,this.viewTransition=t,this.swap=()=>ht(this.newDocument),Object.defineProperties(this,{direction:{enumerable:!0},viewTransition:{enumerable:!0},swap:{enumerable:!0,writable:!0}})}}async function wt(e,t,i,s,n,r,o,a,l){const c=new _t(e,t,i,s,n,r,window.document,o,a,l);return document.dispatchEvent(c)&&(await c.loader(),c.defaultPrevented||(yt(pt),"traverse"!==c.navigationType&&Z({scrollX:scrollX,scrollY:scrollY}))),c}async function Tt(e,t,i){const s=new bt(e,t);return document.dispatchEvent(s),i&&await i(),s.swap(),s}const Z=e=>{history.state&&(history.scrollRestoration="manual",history.replaceState({...history.state,...e},""))},ve=!!document.startViewTransition,G=()=>!!document.querySelector('[name="astro-view-transitions-enabled"]'),ge=(e,t)=>e.pathname===t.pathname&&e.search===t.search;let I,O,D;const ye=e=>document.dispatchEvent(new Event(e)),_e=()=>ye("astro:page-load"),$t=()=>{let e=document.createElement("div");e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.className="astro-route-announcer",document.body.append(e),setTimeout((()=>{let t=document.title||document.querySelector("h1")?.textContent||location.pathname;e.textContent=t}),60)},ae="data-astro-transition-persist",le="data-astro-transition",W="data-astro-transition-fallback";let ce,P=0;async function Et(e,t){try{const i=new Headers(t?.headers);for(const[e,t]of Object.entries(st))i.set(e,t);const s=await fetch(e,{...t,headers:i}),n=(s.headers.get("content-type")??"").split(";",1)[0].trim();return"text/html"!==n&&"application/xhtml+xml"!==n?null:{html:await s.text(),redirected:s.redirected?s.url:void 0,mediaType:n}}catch{return null}}function be(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function It(){let e=Promise.resolve(),t=!1;for(const e of document.getElementsByTagName("script"))void 0===e.dataset.astroExec&&"module"===e.getAttribute("type")&&(t=null===e.getAttribute("src"));t&&document.body.insertAdjacentHTML("beforeend",'<script type="module" src="data:application/javascript,"/>');for(const t of document.getElementsByTagName("script")){if(""===t.dataset.astroExec)continue;const i=t.getAttribute("type");if(i&&"module"!==i&&"text/javascript"!==i)continue;const s=document.createElement("script");s.innerHTML=t.innerHTML;for(const i of t.attributes){if("src"===i.name){const t=new Promise((e=>{s.onload=s.onerror=e}));e=e.then((()=>t))}s.setAttribute(i.name,i.value)}s.dataset.astroExec="",t.replaceWith(s)}return e}history.state?(P=history.state.index,scrollTo({left:history.state.scrollX,top:history.state.scrollY})):G()&&(history.replaceState({index:P,scrollX:scrollX,scrollY:scrollY},""),history.scrollRestoration="manual");const we=(e,t,i,s,n)=>{const r=ge(t,e),o=document.title;document.title=s;let a=!1;if(e.href!==location.href&&!n)if("replace"===i.history){const t=history.state;history.replaceState({...i.state,index:t.index,scrollX:t.scrollX,scrollY:t.scrollY},"",e.href)}else history.pushState({...i.state,index:++P,scrollX:0,scrollY:0},"",e.href);if(document.title=o,D=e,r||(scrollTo({left:0,top:0,behavior:"instant"}),a=!0),n)scrollTo(n.scrollX,n.scrollY);else{if(e.hash){history.scrollRestoration="auto";const t=history.state;location.href=e.href,history.state||(history.replaceState(t,""),r&&window.dispatchEvent(new PopStateEvent("popstate")))}else a||scrollTo({left:0,top:0,behavior:"instant"});history.scrollRestoration="manual"}};function At(e){const t=[];for(const i of e.querySelectorAll("head link[rel=stylesheet]"))if(!document.querySelector(`[${ae}="${i.getAttribute(ae)}"], link[rel=stylesheet][href="${i.getAttribute("href")}"]`)){const e=document.createElement("link");e.setAttribute("rel","preload"),e.setAttribute("as","style"),e.setAttribute("href",i.getAttribute("href")),t.push(new Promise((t=>{["load","error"].forEach((i=>e.addEventListener(i,t))),document.head.append(e)})))}return t}async function ue(e,t,i,s,n){async function r(e){const t=document.getAnimations();document.documentElement.setAttribute(W,e);const i=document.getAnimations().filter((e=>!t.includes(e)&&!function(e){const t=e.effect;return!!(t&&t instanceof KeyframeEffect&&t.target)&&"infinite"===window.getComputedStyle(t.target,t.pseudoElement).animationIterationCount}(e)));return Promise.allSettled(i.map((e=>e.finished)))}const o=document.title,a=await Tt(e,i.viewTransition,(async()=>{if("animate"===n&&!i.transitionSkipped&&!e.signal.aborted)try{await r("old")}catch{}}));we(a.to,a.from,t,o,s),ye(gt),"animate"===n&&(i.transitionSkipped||a.signal.aborted?i.viewTransitionFinished():r("new").finally((()=>i.viewTransitionFinished())))}function xt(){return I?.controller.abort(),I={controller:new AbortController}}async function Te(e,t,i,s,n){const r=xt();if(!G()||location.origin!==i.origin)return r===I&&(I=void 0),void(location.href=i.href);const o=n?"traverse":"replace"===s.history?"replace":"push";if("traverse"!==o&&Z({scrollX:scrollX,scrollY:scrollY}),ge(t,i)&&!s.formData&&("back"!==e&&i.hash||"back"===e&&t.hash))return we(i,t,s,document.title,n),void(r===I&&(I=void 0));const a=await wt(t,i,e,o,s.sourceElement,s.info,r.controller.signal,s.formData,(async function(e){const i=e.to.href,s={signal:e.signal};if(e.formData){s.method="POST";const i=e.sourceElement instanceof HTMLFormElement?e.sourceElement:e.sourceElement instanceof HTMLElement&&"form"in e.sourceElement?e.sourceElement.form:e.sourceElement?.closest("form");s.body=void 0!==t&&"application/x-www-form-urlencoded"===Reflect.get(HTMLFormElement.prototype,"attributes",i).getNamedItem("enctype")?.value?new URLSearchParams(e.formData):e.formData}const n=await Et(i,s);if(null===n)return void e.preventDefault();if(n.redirected){const t=new URL(n.redirected);if(t.origin!==e.to.origin)return void e.preventDefault();e.to=t}if(ce??=new DOMParser,e.newDocument=ce.parseFromString(n.html,n.mediaType),e.newDocument.querySelectorAll("noscript").forEach((e=>e.remove())),!e.newDocument.querySelector('[name="astro-view-transitions-enabled"]')&&!e.formData)return void e.preventDefault();const r=At(e.newDocument);r.length&&!e.signal.aborted&&await Promise.all(r)}));if(a.defaultPrevented||a.signal.aborted)return r===I&&(I=void 0),void(a.signal.aborted||(location.href=i.href));const l=await async function(){if(O&&O.viewTransition){try{O.viewTransition.skipTransition()}catch{}try{await O.viewTransition.updateCallbackDone}catch{}}return O={transitionSkipped:!1}}();if(a.signal.aborted)r===I&&(I=void 0);else{if(document.documentElement.setAttribute(le,a.direction),ve)l.viewTransition=document.startViewTransition((async()=>await ue(a,s,l,n)));else{const e=(async()=>{await Promise.resolve(),await ue(a,s,l,n,be())})();l.viewTransition={updateCallbackDone:e,ready:e,finished:new Promise((e=>l.viewTransitionFinished=e)),skipTransition:()=>{l.transitionSkipped=!0,document.documentElement.removeAttribute(W)},types:new Set}}l.viewTransition?.updateCallbackDone.finally((async()=>{await It(),_e(),$t()})),l.viewTransition?.finished.finally((()=>{l.viewTransition=void 0,l===O&&(O=void 0),r===I&&(I=void 0),document.documentElement.removeAttribute(le),document.documentElement.removeAttribute(W)}));try{await(l.viewTransition?.updateCallbackDone)}catch(e){const t=e;console.log("[astro]",t.name,t.message,t.stack)}}}async function de(e,t){await Te("forward",D,new URL(e,location.href),{})}function St(e){if(!G()&&e.state)return void location.reload();if(null===e.state)return;const t=history.state,i=t.index,s=i>P?"forward":"back";P=i,Te(s,D,new URL(location.href),{},t)}const fe=()=>{history.state&&(scrollX!==history.state.scrollX||scrollY!==history.state.scrollY)&&Z({scrollX:scrollX,scrollY:scrollY})};if(ve||"none"!==be())if(D=new URL(location.href),addEventListener("popstate",St),addEventListener("load",_e),"onscrollend"in window)addEventListener("scrollend",fe);else{let e,t,i,s;const n=()=>s!==history.state?.index?(clearInterval(e),void(e=void 0)):t===scrollY&&i===scrollX?(clearInterval(e),e=void 0,void fe()):(t=scrollY,void(i=scrollX));addEventListener("scroll",(()=>{void 0===e&&(s=history.state?.index,t=scrollY,i=scrollX,e=window.setInterval(n,50))}),{passive:!0})}for(const e of document.getElementsByTagName("script"))he(e),e.dataset.astroExec="";const Lt=document.querySelector(".search ._expand");let q;document.addEventListener("sAdvancedSelect.select",(e=>{document.body.classList.remove("-search-large");const t=e.detail.item;setTimeout((()=>{document.activeElement?.blur()}),Q()?100:0),setTimeout((()=>{t.url?window.open(t.url,"_blank")?.focus():t.slug?de(t.slug):de(`/doc/${Le(t.value)}`)}),Q()?200:0)})),v.define("lo-search",{minChars:0,async items(){if(q)return q;const e=await fetch("/api/doc"),t=await e.json(),i={};return t.forEach((e=>{let t=[];try{t=JSON.parse(e.data.platform)}catch{}t=t.map((e=>e.name.toLowerCase()));const s=e.data.namespace.split(".")[3];i[s]||(i[s]={type:"group",label:s,items:[]});const n=t.map((e=>`<span class="platform -${e}">${e}</span>`)).join("");i[s].items.push({id:Fe(e.id),label:`<div class="_item">\n            <div class="_item-metas">\n              <div class="_item-title">${e.data.title}</div>\n              <div class="_item-description">${e.data.description}</div>\n            </div>\n            <div class="_item-platforms">${n}</div>\n          </div>`,value:`${e.id.replace(/\//gm,".").replace(/\.mdx$/,"")}`,preventSet:!0})})),q=[...(window.menuGroups??[]).map((e=>({...e,items:e.items.map((e=>({...e,label:`<div class="_item">\n                    <div class="_item-metas">\n                      <div class="_item-title">${e.label}</div>\n                      ${e.description?`<div class="_item-description">${e.description}</div>`:""}\n                    </div>\n                  </div>`})))}))),...Object.values(i)],q},filtrable:["label"],hotkey:["cmd+p","cmd+shift+p"]}),Lt?.addEventListener("click",(()=>{document.body.classList.add("-search-large")})),document.addEventListener("astro:page-load",(()=>{C("cmd+shift+p",(()=>{document.body.classList.add("-search-large")})),C("escape",(()=>{document.body.classList.remove("-search-large")}))}));